#!/bin/sh

# Warna terminal
CYAN="\033[0;36m"
BLUE="\033[1;34m"
GREEN="\033[1;32m"
YELLOW="\033[1;33m"
NC="\033[0m" # No Color

# Fungsi untuk menampilkan branding
show_branding() {
    printf "${CYAN}"
    echo "╔═════════════════════════════════════════╗"
    echo "║        PAKAWRT FIRMWARE - AW1000        ║"
    echo "╚═════════════════════════════════════════╝"
    printf "${BLUE}Author        : Pakalolo Waraso${NC}\n"
    printf "${BLUE}Special Thanks: Awiks Telegram Group${NC}\n"
    printf "${BLUE}Maintainer    : https://github.com/BootLoopLover${NC}\n"
    printf "${CYAN}===========================================${NC}\n"
}

# Cek dependensi penting
for cmd in wget tar opkg; do
    if ! command -v "$cmd" >/dev/null 2>&1; then
        echo "Error: Perintah '$cmd' tidak tersedia. Harap install terlebih dahulu."
        exit 1
    fi
done

# Menu utama
while true; do
    clear
    show_branding
    echo ""
    echo "========== PakaWrt Firmware Menu =========="
    echo "1. Install OpenWrt 24.10.0"
    echo "2. Install NSS Build (30 April 2025)"
    echo "3. Install NSS Lite Build (8 Mei 2025)"
    echo "4. Exit to main menu"
    echo "==========================================="
    printf "Select an option [1-4]: "
    read -r choice

    case "$choice" in
        1)
            wget -q -O installer http://abidarwi.sh/pakafirmware_owrt-final.sh
            chmod +x installer && ./installer
            read -n1 -r -p "Press any key to return to menu..." ;;
        2)
            clear
            show_branding
            echo "==========================================="
            echo "           PakawrtNss v24.10-nss"
            echo "==========================================="
            echo "Kernel      : 6.6.79"
            echo "Developer   : Pakalolo"
            echo "Platform    : AW1000 / aarch64"
            echo "==========================================="
            echo "# Dirancang untuk koneksi optimal menggunakan modem LTE & VPN."
            echo "# Kompatibel dengan SIM data tanpa batas, mendukung stabilitas jangka panjang."
            echo "=== Fitur Utama ==="
            echo "[Status & Monitoring]"
            echo " - VnStat: Pemantauan trafik jaringan real-time"
            echo "[Modem Management Tools]"
            echo " - AT Command Interface"
            echo " - LTE Band Selector (pengunci band frekuensi)"
            echo " - SMS Manager (terima/kirim pesan singkat)"
            echo " - Informasi Modem Lengkap"
            echo " - Dukungan QModem Interface"
            echo "[Layanan Tambahan]"
            echo " - Passwall2: VPN & Proxy Manager terintegrasi"
            echo " - Internet Detector: Pemantauan status koneksi aktif"
            echo " - Tailscale: WireGuard VPN Mesh dengan integrasi cloud"
            echo "==========================================="
            echo
            read -n1 -r -p "Press enter to continue your installation..."
            echo
            wget -q -O installer http://abidarwi.sh/pakanss30042025.sh
            chmod +x installer && ./installer
            read -n1 -r -p "Press any key to return to menu..." ;;
        3)
            clear
            show_branding
            echo "==========================================="
            echo "        PakawrtNss Lite v24.10-nss"
            echo "==========================================="
            echo "Kernel      : 6.6.86"
            echo "Developer   : Pakalolo"
            echo "Platform    : AW1000 / aarch64"
            echo "==========================================="
            echo "📌 Catatan Penting:"
            echo "# Support libernet installation"
            echo "# Default cocok untuk SIM unlimited & VPN."
            echo "# Untuk pengguna hotspot:"
            echo "  - Aktifkan TTL fix melalui QModem"
            echo "  - Aktifkan semua CPU di pengaturan interface jaringan"
            echo "    (network → interfaces → device network options)"
            echo "=== Status & System ==="
            echo " - Default setting on boot (Stable performance)"
            echo "=== Modem Management ==="
            echo " - Preferred Band Selector"
            echo " - Modem Info Display"
            echo " - QModem Interface"
            echo "=== Layanan Tambahan ==="
            echo " - Passwall2 (VPN/Proxy Manager)"
            echo "==========================================="
            echo
            read -n1 -r -p "Press enter to continue your installation..."
            echo
            wget -q -O installer http://abidarwi.sh/pakanss08052025.sh
            chmod +x installer && ./installer
            read -n1 -r -p "Press any key to return to menu..." ;;
        4)
            echo -e "\nTerima kasih telah menggunakan PakaWrt!"
            exit 0 ;;
        *)
            echo "Pilihan tidak valid! Silakan coba lagi."
            sleep 1 ;;
    esac
done
