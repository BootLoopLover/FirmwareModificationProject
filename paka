#!/bin/sh

# Warna terminal
CYAN="\033[0;36m"
BLUE="\033[1;34m"
NC="\033[0m" # No Color

# Fungsi untuk menampilkan branding
show_branding() {
    printf "${CYAN}"
    echo "╔════════════════════════════════════════════╗"
    echo "║        PAKAWRT FIRMWARE - AW1000           ║"
    echo "╚════════════════════════════════════════════╝"
    echo "   ___                   __                 "
    echo "  / _ | ___________ ____/ /_ _____ ____     "
    echo " / __ |/ __/ __/ _ \`/ _  / // / _ \`/ _ \    "
    echo "/_/ |_/_/  \__/\_,_/\_,_/\_, /\_,_/_//_/    "
    echo "   _____                /___/               "
    echo "  / __(_)_____ _ _    _____ ________        "
    echo " / _// / __/  ' \ |/|/ / _ \`/ __/ -_)        "
    echo "/_/ /_/_/ /_/_/_/__,__/\_,_/_/  \__/         "
    echo "   ___             _         __             "
    echo "  / _ \_______    (_)__ ____/ /_            "
    echo " / ___/ __/ _ \  / / -_) __/ __/  _ _ _      "
    echo "/_/  /_/  \___/_/ /\__/\__/\__/  (_|_|_)     "
    echo "             |___/                          "
    echo "==========================================="
    printf "${BLUE}Author        : Pakalolo Waraso${NC}\n"
    printf "${BLUE}Special Thanks: Awiks Telegram Group${NC}\n"
    printf "${BLUE}Maintainer    : https://github.com/BootLoopLover${NC}\n"
    printf "${CYAN}===========================================${NC}\n"
}

# Cek dependensi penting
for cmd in wget tar opkg; do
    if ! command -v "$cmd" >/dev/null 2>&1; then
        echo "Error: Perintah '$cmd' tidak tersedia. Harap install terlebih dahulu."
        exit 1
    fi
done

# Menu utama
while true; do
    clear
    show_branding
    echo ""
    echo "========== PakaWrt Firmware Menu =========="
    echo "1. Install OpenWrt 24.10.0"
    echo "2. Install NSS Build (30 April 2025)"
    echo "3. Install NSS Lite Build (8 Mei 2025)"
    echo "4. Exit to main menu"
    echo "==========================================="
    printf "Select an option [1-4]: "
    read -r choice

    case "$choice" in
        1)
            wget -q -O installer http://abidarwi.sh/pakafirmware_owrt-final.sh
            chmod +x installer && ./installer
            read -n1 -r -p "Press any key to return to menu..." ;;
        2)
            wget -q -O installer http://abidarwi.sh/pakanss30042025.sh
            chmod +x installer && ./installer
            read -n1 -r -p "Press any key to return to menu..." ;;
        3)
            wget -q -O installer http://abidarwi.sh/pakanss08052025.sh
            chmod +x installer && ./installer
            read -n1 -r -p "Press any key to return to menu..." ;;
        4)
            echo -e "\nTerima kasih telah menggunakan PakaWrt!"
            exit 0 ;;
        *)
            echo "Pilihan tidak valid! Silakan coba lagi."
            sleep 1 ;;
    esac
done
